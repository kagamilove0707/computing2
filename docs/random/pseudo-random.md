# 擬似乱数

コンピュータで何らかのアプリケーションを実現する上で **乱数** は様々な場面で出現します。
ゲームなどでゲーム性を高めるためにランダム要素が取り入れられます。
また、厳密に解くことが難しい問題でも、乱数を利用した **乱択アルゴリズム** によって比較的容易に解くことができるようになります。

私たちが普段使うコンピュータは決定性のある計算機なので、本来入力が同じであれば出力も常に同じになります。
しかし、乱数を用いた計算は、入力が同じであっても出力が毎回異なります。
これは、乱数関数が決定的な計算からランダムに見えるような数列を生成し、呼び出されるたびに新たな数列の値を返すことで実現しています。
このような、ランダムに見える関数を使って擬似的に乱数を生成する方法を **擬似乱数** と呼びます。
コンピュータ上の乱数は基本的には擬似乱数が用いられます。

Processing の乱数関数 `random` について復習しましょう。
`random` 関数は一つまたは二つの実数型の引数を受け取ります。
1 つの引数で `random(high)` と呼び出された場合、`random` 関数は 0 以上 `high` 未満の実数値をランダムに返します。
2 つの引数で `random(low, high)` と呼び出された場合、 `random` 関数は `low` 以上 `high` 未満の実数値をランダムに返します。
`random` 関数は一様乱数を返すため、`low`（または 0）と `high` の間の値が等確率で出現します。

例えば、確率 $$0 \leq p \leq 1$$ である処理を実行したい場合には、以下のようなプログラムを書くことができます。

```java
float p = 0.1;
if (random(1) < p) {
  // 10%の確率で実行する処理
}
```

コインを投げたときに表が出る確率を 50%とし、10000 回コインを投げたときに表が出た回数を数えるプログラムは以下のようになります。

```java
int repeat = 10000;
int count = 0;
for (int i = 0; i < repeat; ++i) {
  if (random(1) < 0.5) {
    count += 1;
  }
}
println(count + " / " + repeat);
```

実行結果は以下のようになります。

```console
4979 / 10000
```

# 乱数の種

擬似乱数によって生成される数列を制御するためには乱数の **種** （seed）が用いられます。
Processing での乱数種の設定は `randomSeed` 関数を用います。
`randomSeed` 関数は引数として受け取った整数値を乱数種として設定します。

以下は乱数種を用いずに 5 個の実数値を表示するプログラムです。

```java
for (int i = 0; i < 5; ++i) {
  println(random(1));
}
```

1 回目の実行結果は以下の通りです。

```console
0.901366
0.9354197
0.4483686
0.34030527
0.87377113
```

2 回目の実行結果は以下の通りです。

```console
0.034834802
0.20180964
0.73463714
0.8813292
0.7115238
```

1 回目と 2 回目で実行結果が異なっていることが確認できます。

以下のように `randomSeed` 関数で乱数の種を 0 に設定してみます。

```java
randomSeed(0);
for (int i = 0; i < 5; ++i) {
  println(random(1));
}
```

1 回目の実行結果は以下の通りです。

```console
0.73096776
0.831441
0.24053639
0.6063452
0.6374174
```

2 回目の実行結果は以下の通りです。

```console
0.73096776
0.831441
0.24053639
0.6063452
0.6374174
```

乱数種を同じにすることで 1 回目と 2 回目で同じ実行結果になりました。

一般的には、実行時の時間などを乱数種に利用することで実行毎に異なる結果を発生させます。
